"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[665],{31841:function(Pe,U,s){s.r(U),s.d(U,{default:function(){return ve}});var H=s(15009),C=s.n(H),J=s(99289),S=s.n(J),Q=s(97857),M=s.n(Q),W=s(5574),$=s.n(W),X=s(5914),w=s(42075),b=s(4393),F=s(67294),L=s(83067),K=s(2872),A=s(57813),t=s(62492),V=s(952),p=s(32610),i=s(85893),k={labelCol:{span:6},wrapperCol:{span:14}},q=function(){var r,m,f,u,j=(0,p.useDispatch)(),n=(0,p.useIntl)(),e=(0,p.useSelector)(function(o){return o==null?void 0:o.permission}),l=(0,F.useState)(!1),d=$()(l,2),h=d[0],E=d[1],v=(0,F.useRef)(null),c=(0,F.useRef)(),pe=V.ZP.useForm(),ge=$()(pe,1),I=ge[0];(0,F.useEffect)(function(){(function(){var o,a;if((o=e.PermissionForm)!==null&&o!==void 0&&o.type){var g,P;if(((g=e.PermissionForm)===null||g===void 0?void 0:g.type)===t.Kg.CREATE){var y;I.resetFields(),(y=c.current)===null||y===void 0||y.setColor("#fff")}if([t.Kg.UPDATE,t.Kg.COPY].includes((P=e.PermissionForm)===null||P===void 0?void 0:P.type)){var T,x;I.setFieldsValue(M()({},e.PermissionForm.itemEdit)),(T=c.current)===null||T===void 0||T.setColor(((x=e.PermissionForm.itemEdit)===null||x===void 0?void 0:x.color)||"")}}E(!!((a=e.PermissionForm)!==null&&a!==void 0&&a.type))})()},[(r=e.PermissionForm)===null||r===void 0?void 0:r.type]);var he=function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L.HD,{}),(0,i.jsx)(L.pu,{form:I,ref:c})]})},Y=function(){var a;j({type:"permission/updatePermissionForm",payload:{type:""}}),I.resetFields(),(a=c.current)===null||a===void 0||a.setColor("#fff")};return(0,i.jsx)(X.Z,{width:600,title:((m=e.PermissionForm)===null||m===void 0?void 0:m.type)===t.Kg.UPDATE?n.formatMessage({id:"pages.Admin.Permission.PermissionForm.Update.title",defaultMessage:"C\u1EADp nh\u1EADt permission"}):n.formatMessage({id:"pages.Admin.Permission.PermissionForm.Create.title",defaultMessage:"Th\xEAm m\u1EDBi permission"}),forceRender:!0,destroyOnClose:!0,visible:h,onCancel:Y,footer:!1,children:(0,i.jsx)("div",{ref:v,children:(0,i.jsx)(V.ZP,M()(M()({form:I},k),{},{layout:"horizontal",onFinish:function(){var o=S()(C()().mark(function a(g){var P,y,T,x,G,D,N;return C()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return x=M()(M()({},g),{},{code:(0,A.uz)(g.name).replace(/-/g,"_")}),Z.next=3,((P=e.PermissionForm)===null||P===void 0?void 0:P.type)===t.Kg.UPDATE?(0,K.kY)(((y=e.PermissionForm)===null||y===void 0||(T=y.itemEdit)===null||T===void 0?void 0:T.id)||"",x):(0,K.J$)(x);case 3:G=Z.sent,G&&(Y(),(D=e.PermissionList)===null||D===void 0||(N=D.reload)===null||N===void 0||N.call(D));case 5:case"end":return Z.stop()}},a)}));return function(a){return o.apply(this,arguments)}}(),submitter:{render:function(a,g){return(0,i.jsx)(w.Z,{className:"flex justify-end mt-4",children:g})},searchConfig:{submitText:((f=e.PermissionForm)===null||f===void 0?void 0:f.type)===t.Kg.UPDATE?n.formatMessage({id:"pages.Admin.Permission.PermissionForm.Update.submitText",defaultMessage:"C\u1EADp nh\u1EADt"}):n.formatMessage({id:"pages.Admin.Permission.PermissionForm.Create.submitText",defaultMessage:"T\u1EA1o m\u1EDBi"}),resetText:n.formatMessage({id:"pages.Admin.Permission.PermissionForm.resetText",defaultMessage:"L\xE0m m\u1EDBi"})},resetButtonProps:{className:((u=e.PermissionForm)===null||u===void 0?void 0:u.type)===t.Kg.UPDATE?"hidden":""}},onReset:function(){var a;(a=c.current)===null||a===void 0||a.setColor("#fff")},children:(0,i.jsx)(b.Z,{children:he()})}))})})},_=q,ee=s(65987),se=s(51767),ie=s(7842),B=s(66309),O=s(83062),z=s(9625),re=s(72269),ne=function(r){var m=r.status,f=r.record,u=(0,p.useSelector)(function(n){return n==null?void 0:n.permission}),j=function(){var n=S()(C()().mark(function e(l){var d,h,E;return C()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,K.QG)(f.id,l?"ACTIVE":"INACTIVE");case 2:E=c.sent,E&&((d=u.PermissionList)===null||d===void 0||(h=d.reload)===null||h===void 0||h.call(d));case 4:case"end":return c.stop()}},e)}));return function(l){return n.apply(this,arguments)}}();return(0,i.jsx)(re.Z,{checked:m==="ACTIVE",onChange:j})},te=ne,ae=s(51042),oe=s(15867),le=function(){var r=(0,p.useDispatch)(),m=(0,z.Z)(),f=function(){r({type:"permission/updatePermissionForm",payload:{type:t.Kg.CREATE}})};return(0,i.jsx)(oe.ZP,{className:"".concat(m.className([t.Kg.CREATE])),type:"primary",onClick:f,icon:(0,i.jsx)(ae.Z,{}),children:(0,i.jsx)(p.FormattedMessage,{id:"pages.create",defaultMessage:"T\u1EA1o m\u1EDBi"})})},de=le,me=function(){var r=(0,p.useIntl)(),m=(0,p.useDispatch)(),f=(0,F.useRef)(),u=(0,z.Z)();(0,F.useEffect)(function(){m({type:"permission/updatePermissionList",payload:{reload:function(){var e;return(e=f.current)===null||e===void 0?void 0:e.reload()}}})},[]);var j=[{title:r.formatMessage({id:"pages.keyword",defaultMessage:"T\xECm theo"}),dataIndex:"keyword",hideInTable:!0,formItemProps:{tooltip:r.formatMessage({id:"pages.Admin.Permission.PermissionList.tooltip",defaultMessage:"B\u1EA1n c\xF3 th\u1EC3 t\xECm ki\u1EBFm theo code, name."})},fieldProps:{placeholder:r.formatMessage({id:"pages.Admin.Permission.PermissionList.placeholder",defaultMessage:"Nh\u1EADp code, name."})}},{title:r.formatMessage({id:"pages.code",defaultMessage:"Code"}),dataIndex:"code",width:120,renderText:function(e){return e&&(0,i.jsx)(B.Z,{color:"default",children:e})},search:!1},{title:r.formatMessage({id:"pages.name",defaultMessage:"Name"}),dataIndex:"name",width:150,search:!1},{title:r.formatMessage({id:"pages.color",defaultMessage:"M\xE0u s\u1EAFc"}),dataIndex:"color",width:150,renderText:function(e){return e&&(0,i.jsx)(B.Z,{color:e,children:e})},search:!1},{title:r.formatMessage({id:"pages.createdAt",defaultMessage:"Ng\xE0y t\u1EA1o"}),dataIndex:"createdAt",valueType:"dateTime",width:150,search:!1,sorter:!0},{title:r.formatMessage({id:"pages.updatedAt",defaultMessage:"Ng\xE0y c\u1EADp nh\u1EADt"}),dataIndex:"updatedAt",valueType:"dateTime",width:150,search:!1,sorter:!0},{title:r.formatMessage({id:"pages.status",defaultMessage:"Tr\u1EA1ng th\xE1i"}),dataIndex:"status",width:100,renderText:function(e,l){return(0,i.jsx)(te,{status:e,record:l})},fieldProps:{placeholder:r.formatMessage({id:"pages.status.placeholder",defaultMessage:"Ch\u1ECDn tr\u1EA1ng th\xE1i."})},valueType:"select",valueEnum:(0,A.Z0)(),hideInTable:!u.accessible([t.Kg.UPDATE_STATUS])},{title:r.formatMessage({id:"pages.options",defaultMessage:"Tu\u1EF3 ch\u1EC9nh"}),dataIndex:"option",valueType:"option",align:"center",fixed:"right",width:90,hideInTable:!u.accessible([t.Kg.UPDATE,t.Kg.COPY]),render:function(e,l){return[(0,i.jsx)(O.Z,{className:"".concat(u.className([t.Kg.UPDATE])),title:(0,A.sb)(),color:"cyan",placement:"left",children:(0,i.jsx)("a",{onClick:function(){m({type:"permission/updatePermissionForm",payload:{itemEdit:l,type:t.Kg.UPDATE}})},children:(0,i.jsx)(ee.Z,{style:{fontSize:"16px",color:"#08c"}})})},"update-permission"),(0,i.jsx)(O.Z,{className:"".concat(u.className([t.Kg.COPY])),title:(0,A.wn)(),color:"cyan",placement:"left",children:(0,i.jsx)("a",{onClick:function(){m({type:"permission/updatePermissionForm",payload:{itemEdit:l,type:t.Kg.COPY}})},children:(0,i.jsx)(se.Z,{style:{fontSize:"16px",color:"#08c"}})})},"copy-permission")]}}];return(0,i.jsx)("div",{children:(0,i.jsx)(ie.ZP,{headerTitle:r.formatMessage({id:"pages.Admin.Permission.PermissionList.headerTitle",defaultMessage:"Danh s\xE1ch Permission"}),search:{layout:"vertical"},actionRef:f,rowKey:"id",sticky:!0,pagination:M()({},A.Uj),request:function(){var n=S()(C()().mark(function e(l,d,h){return C()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,K.Hh)(l,d,h);case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},e)}));return function(e,l,d){return n.apply(this,arguments)}}(),toolBarRender:function(){return[(0,i.jsx)(de,{},"create-permission")]},columns:j,scroll:A.V5})})},ue=me,ce=s(11774),fe=function(){return(0,i.jsxs)(ce._z,{children:[(0,i.jsx)(_,{}),(0,i.jsx)(ue,{})]})},ve=fe}}]);
