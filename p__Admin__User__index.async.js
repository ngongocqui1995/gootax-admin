"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[971],{55287:function(W,w,a){var S=a(1413),d=a(67294),L=a(5717),P=a(91146),K=function(N,$){return d.createElement(P.Z,(0,S.Z)((0,S.Z)({},N),{},{ref:$,icon:L.Z}))};K.displayName="EyeOutlined",w.Z=d.forwardRef(K)},94149:function(W,w,a){a.d(w,{Z:function(){return N}});var S=a(1413),d=a(67294),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},P=L,K=a(91146),p=function(V,z){return d.createElement(K.Z,(0,S.Z)((0,S.Z)({},V),{},{ref:z,icon:P}))};p.displayName="LockOutlined";var N=d.forwardRef(p)},15163:function(W,w,a){a.r(w),a.d(w,{default:function(){return Ze}});var S=a(15009),d=a.n(S),L=a(99289),P=a.n(L),K=a(97857),p=a.n(K),N=a(5574),$=a.n(N),V=a(5914),z=a(42075),ne=a(4393),I=a(67294),j=a(83067),b=a(34955),g=a(57813),le="code,name,phone",ee={role:[{key:"role.id",condition:"$eq"}],gender:[{key:"gender",condition:"$in"}]};function ie(c){return H.apply(this,arguments)}function H(){return H=P()(d()().mark(function c(s){var m,n,e,l=arguments;return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return m=l.length>1&&l[1]!==void 0?l[1]:{},n=l.length>2&&l[2]!==void 0?l[2]:{},u.next=4,(0,b.Z)({url:"users",method:"GET",joins:(0,g.I6)(p()(p()(p()({},n),s),{},{join:"role"}),ee),params:(0,g.ZC)(p()({},s),ee,le),sorts:(0,g.q5)(p()(p()({},m),{},{updatedAt:"descend"}))});case 4:return e=u.sent,u.abrupt("return",{data:(e==null?void 0:e.data)||[],total:(e==null?void 0:e.total)||0,success:!0});case 6:case"end":return u.stop()}},c)})),H.apply(this,arguments)}function oe(c){return Y.apply(this,arguments)}function Y(){return Y=P()(d()().mark(function c(s){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,b.Z)({url:"users",method:"POST",body:(0,g.A6)(s)});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},c)})),Y.apply(this,arguments)}function ue(c,s){return G.apply(this,arguments)}function G(){return G=P()(d()().mark(function c(s,m){return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.Z)({url:"users/".concat(s),method:"PATCH",body:(0,g.A6)(m)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},c)})),G.apply(this,arguments)}function de(c,s){return J.apply(this,arguments)}function J(){return J=P()(d()().mark(function c(s,m){return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.Z)({url:"users/update-email/change-password",method:"PUT",body:(0,g.A6)(p()(p()({},m),{},{user:s}))});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},c)})),J.apply(this,arguments)}function Le(c){return Q.apply(this,arguments)}function Q(){return Q=_asyncToGenerator(_regeneratorRuntime().mark(function c(s){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,request({url:"users/update/change-password",method:"PUT",body:removeParamsEmpty(s)});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},c)})),Q.apply(this,arguments)}function ce(c,s){return X.apply(this,arguments)}function X(){return X=P()(d()().mark(function c(s,m){return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.Z)({url:"users/status/".concat(s),method:"PUT",body:{status:m}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},c)})),X.apply(this,arguments)}var t=a(62492),re=a(952),D=a(32610),r=a(85893),me={labelCol:{span:6},wrapperCol:{span:14}},pe=function(){var s,m,n=(0,D.useDispatch)(),e=(0,D.useIntl)(),l=(0,D.useSelector)(function(y){return y==null?void 0:y.user}),v=(0,I.useState)(!1),u=$()(v,2),i=u[0],h=u[1],U=(0,I.useRef)(null),T=(0,I.useRef)(),F=re.ZP.useForm(),O=$()(F,1),k=O[0];(0,I.useEffect)(function(){(function(){var y,o;if((y=l.UserForm)!==null&&y!==void 0&&y.type){var C,A;if(((C=l.UserForm)===null||C===void 0?void 0:C.type)===t.Kg.CREATE){var E;k.resetFields(),(E=T.current)===null||E===void 0||E.setImageUrl("")}if([t.Kg.UPDATE,t.Kg.COPY].includes((A=l.UserForm)===null||A===void 0?void 0:A.type)){var x,M,Z,R;k.setFieldsValue(p()(p()({},l.UserForm.itemEdit),{},{role:(x=l.UserForm.itemEdit)===null||x===void 0||(M=x.role)===null||M===void 0?void 0:M.id})),(Z=T.current)===null||Z===void 0||Z.setImageUrl(((R=l.UserForm.itemEdit)===null||R===void 0?void 0:R.avatar)||"")}}h(!!((o=l.UserForm)!==null&&o!==void 0&&o.type))})()},[(s=l.UserForm)===null||s===void 0?void 0:s.type]);var Re=function(){var o,C,A,E;if((o=l.UserForm)!==null&&o!==void 0&&o.type)return(0,r.jsxs)(r.Fragment,{children:[![t.Kg.UPDATE_PASSWORD].includes((C=l.UserForm)===null||C===void 0?void 0:C.type)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.ab,{ref:T,folder:"avatar"}),(0,r.jsx)(j.HD,{}),(0,r.jsx)(j.Tu,{}),(0,r.jsx)(j.M_,{}),((A=l.UserForm)===null||A===void 0?void 0:A.type)!==t.Kg.UPDATE&&(0,r.jsx)(j.wu,{}),(0,r.jsx)(j.HP,{fieldProps:{getPopupContainer:function(M){return U&&U.current||M.parentNode}}}),(0,r.jsx)(j.pB,{fieldProps:{getPopupContainer:function(M){return U&&U.current||M.parentNode}}})]}),[t.Kg.UPDATE_PASSWORD].includes((E=l.UserForm)===null||E===void 0?void 0:E.type)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.wu,{name:"new_password",label:e.formatMessage({id:"pages.new_password",defaultMessage:"M\u1EADt kh\u1EA9u m\u1EDBi"}),placeholder:e.formatMessage({id:"pages.new_password.placeholder",defaultMessage:"Nh\u1EADp m\u1EADt kh\u1EA9u m\u1EDBi"}),labelCol:{span:8},wrapperCol:{span:12}}),(0,r.jsx)(j.wu,{name:"confirm_password",label:e.formatMessage({id:"pages.confirm_password",defaultMessage:"M\u1EADt kh\u1EA9u x\xE1c nh\u1EADn"}),placeholder:e.formatMessage({id:"pages.confirm_password.placeholder",defaultMessage:"Nh\u1EADp m\u1EADt kh\u1EA9u x\xE1c nh\u1EADn"}),labelCol:{span:8},wrapperCol:{span:12}})]})]})},te=function(){var o;n({type:"user/updateUserForm",payload:{type:""}}),k.resetFields(),(o=T.current)===null||o===void 0||o.setImageUrl("")},Ke=function(){var o;switch((o=l.UserForm)===null||o===void 0?void 0:o.type){case t.Kg.CREATE:case t.Kg.COPY:return e.formatMessage({id:"pages.Admin.User.UserForm.Create.title",defaultMessage:"Th\xEAm m\u1EDBi ng\u01B0\u1EDDi d\xF9ng"});case t.Kg.UPDATE:return e.formatMessage({id:"pages.Admin.User.UserForm.Update.title",defaultMessage:"C\u1EADp nh\u1EADt ng\u01B0\u1EDDi d\xF9ng"});case t.Kg.UPDATE_PASSWORD:return e.formatMessage({id:"pages.Admin.User.UserForm.UpdatePassword.title",defaultMessage:"\u0110\u1ED5i m\u1EADt kh\u1EA9u"});default:return""}},Ie=function(){var o;switch((o=l.UserForm)===null||o===void 0?void 0:o.type){case t.Kg.CREATE:case t.Kg.COPY:return e.formatMessage({id:"pages.Admin.User.UserForm.Create.submitText",defaultMessage:"T\u1EA1o m\u1EDBi"});case t.Kg.UPDATE:return e.formatMessage({id:"pages.Admin.User.UserForm.Update.submitText",defaultMessage:"C\u1EADp nh\u1EADt"});case t.Kg.UPDATE_PASSWORD:return e.formatMessage({id:"pages.Admin.User.UserForm.UpdatePassword.submitText",defaultMessage:"C\u1EADp nh\u1EADt"});default:return""}};return(0,r.jsx)(V.Z,{width:600,title:Ke(),forceRender:!0,destroyOnClose:!0,visible:i,onCancel:te,footer:!1,children:(0,r.jsx)("div",{ref:U,children:(0,r.jsx)(re.ZP,p()(p()({form:k},me),{},{layout:"horizontal",onFinish:function(){var y=P()(d()().mark(function o(C){var A,E,x,M,Z,R,B,_;return d()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:x=p()(p()({},C),{},{avatar:(A=T.current)===null||A===void 0?void 0:A.getImageUrl()}),f.t0=(E=l.UserForm)===null||E===void 0?void 0:E.type,f.next=f.t0===t.Kg.COPY||f.t0===t.Kg.CREATE?4:f.t0===t.Kg.UPDATE?8:f.t0===t.Kg.UPDATE_PASSWORD?12:17;break;case 4:return f.next=6,oe(x);case 6:return M=f.sent,f.abrupt("break",17);case 8:return f.next=10,ue(((Z=l.UserForm.itemEdit)===null||Z===void 0?void 0:Z.id)||"",x);case 10:return M=f.sent,f.abrupt("break",17);case 12:return delete x.avatar,f.next=15,de(((R=l.UserForm.itemEdit)===null||R===void 0?void 0:R.id)||"",x);case 15:return M=f.sent,f.abrupt("break",17);case 17:M&&(te(),(B=l.UserList)===null||B===void 0||(_=B.reload)===null||_===void 0||_.call(B));case 18:case"end":return f.stop()}},o)}));return function(o){return y.apply(this,arguments)}}(),submitter:{render:function(o,C){return(0,r.jsx)(z.Z,{className:"flex justify-end mt-4",children:C})},searchConfig:{submitText:Ie(),resetText:e.formatMessage({id:"pages.Admin.User.UserForm.resetText",defaultMessage:"L\xE0m m\u1EDBi"})},resetButtonProps:{className:[t.Kg.UPDATE,t.Kg.UPDATE_PASSWORD].includes((m=l.UserForm)===null||m===void 0?void 0:m.type)?"hidden":""}},onReset:function(){var o;(o=T.current)===null||o===void 0||o.setImageUrl("")},children:(0,r.jsx)(ne.Z,{children:Re()})}))})})},ve=pe,fe=a(55287),ge=a(65987),he=a(51767),Ue=a(94149),ye=a(7842),ae=a(9625),Te=a(72269),Pe=function(s){var m=s.status,n=s.record,e=(0,D.useSelector)(function(v){return v==null?void 0:v.user}),l=function(){var v=P()(d()().mark(function u(i){var h,U,T;return d()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,ce(n.id,i?"ACTIVE":"INACTIVE");case 2:T=O.sent,T&&((h=e.UserList)===null||h===void 0||(U=h.reload)===null||U===void 0||U.call(h));case 4:case"end":return O.stop()}},u)}));return function(i){return v.apply(this,arguments)}}();return(0,r.jsx)(Te.Z,{checked:m==="ACTIVE",onChange:l})},Me=Pe,Ce=a(51042),Ae=a(15867),Ee=function(){var s=(0,D.useDispatch)(),m=(0,ae.Z)(),n=function(){s({type:"user/updateUserForm",payload:{type:t.Kg.CREATE}})};return(0,r.jsx)(Ae.ZP,{className:"".concat(m.className([t.Kg.CREATE])),type:"primary",onClick:n,icon:(0,r.jsx)(Ce.Z,{}),children:(0,r.jsx)(D.FormattedMessage,{id:"pages.create",defaultMessage:"T\u1EA1o m\u1EDBi"})})},xe=Ee,je=a(1978),se=a(97776),Fe=a(66309),q=a(83062),we=function(){var s=(0,D.useIntl)(),m=(0,I.useRef)(),n=(0,D.useDispatch)(),e=(0,ae.Z)();(0,I.useEffect)(function(){n({type:"user/updateUserList",payload:{reload:function(){var u;return(u=m.current)===null||u===void 0?void 0:u.reload()}}})},[]);var l=[{title:s.formatMessage({id:"pages.keyword",defaultMessage:"T\xECm theo"}),dataIndex:"keyword",hideInTable:!0,formItemProps:{tooltip:s.formatMessage({id:"pages.Admin.User.UserList.tooltip",defaultMessage:"B\u1EA1n c\xF3 th\u1EC3 t\xECm ki\u1EBFm theo t\xEAn, email, s\u1ED1 \u0111i\u1EC7n tho\u1EA1i."})},fieldProps:{placeholder:s.formatMessage({id:"pages.Admin.User.UserList.placeholder",defaultMessage:"Nh\u1EADp m\xE3, t\xEAn, email, s\u1ED1 \u0111i\u1EC7n tho\u1EA1i."})}},{title:s.formatMessage({id:"pages.avatar",defaultMessage:"\u1EA2nh"}),dataIndex:"avatar",width:120,search:!1,render:function(u,i){return(0,r.jsx)("a",{className:je.Z.avatar,children:(0,r.jsx)(se.Z,{placeholder:(0,r.jsx)(se.Z,{height:t.er.height,src:"error",fallback:g.gL}),preview:{mask:(0,r.jsx)(fe.Z,{})},height:t.er.height,width:t.er.width,src:(i==null?void 0:i.avatar)||"",fallback:g.gL})})}},{title:s.formatMessage({id:"pages.name",defaultMessage:"T\xEAn"}),dataIndex:"name",width:150,search:!1},{title:s.formatMessage({id:"pages.phone",defaultMessage:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"}),dataIndex:"phone",width:130,renderText:function(u){return(0,g.z1)(u)},search:!1},{title:s.formatMessage({id:"pages.gender",defaultMessage:"Gi\u1EDBi t\xEDnh"}),dataIndex:"gender",fieldProps:{placeholder:s.formatMessage({id:"pages.gender.placeholder",defaultMessage:"Ch\u1ECDn gi\u1EDBi t\xEDnh."})},width:120,valueType:"select",valueEnum:(0,g.q8)()},{title:s.formatMessage({id:"pages.role",defaultMessage:"Role"}),dataIndex:"role",renderFormItem:function(){return(0,r.jsx)(j.pB,{noStyle:!0,rules:[]})},width:150,renderText:function(u,i){var h,U,T;return(i==null||(h=i.role)===null||h===void 0?void 0:h.id)&&(0,r.jsx)(Fe.Z,{color:i==null||(U=i.role)===null||U===void 0?void 0:U.color,children:i==null||(T=i.role)===null||T===void 0?void 0:T.name})}},{title:s.formatMessage({id:"pages.email",defaultMessage:"Email"}),dataIndex:"email",width:150,search:!1},{title:s.formatMessage({id:"pages.createdAt",defaultMessage:"Ng\xE0y t\u1EA1o"}),dataIndex:"createdAt",valueType:"dateTime",width:150,search:!1,sorter:!0},{title:s.formatMessage({id:"pages.updatedAt",defaultMessage:"Ng\xE0y c\u1EADp nh\u1EADt"}),dataIndex:"updatedAt",valueType:"dateTime",width:150,search:!1,sorter:!0},{title:s.formatMessage({id:"pages.status",defaultMessage:"Tr\u1EA1ng th\xE1i"}),dataIndex:"status",width:100,renderText:function(u,i){return(0,r.jsx)(Me,{status:u,record:i})},fieldProps:{placeholder:s.formatMessage({id:"pages.status.placeholder",defaultMessage:"Ch\u1ECDn tr\u1EA1ng th\xE1i."})},valueType:"select",valueEnum:(0,g.Z0)(),hideInTable:!e.accessible([t.Kg.UPDATE_STATUS])},{title:s.formatMessage({id:"pages.options",defaultMessage:"Tu\u1EF3 ch\u1EC9nh"}),dataIndex:"option",valueType:"option",align:"center",fixed:"right",width:90,hideInTable:!e.accessible([t.Kg.UPDATE,t.Kg.COPY]),render:function(u,i){return[(0,r.jsx)(q.Z,{className:"".concat(e.className([t.Kg.UPDATE])),title:(0,g.sb)(),color:"cyan",placement:"left",children:(0,r.jsx)("a",{onClick:function(){n({type:"user/updateUserForm",payload:{itemEdit:i,type:t.Kg.UPDATE}})},children:(0,r.jsx)(ge.Z,{style:{fontSize:"16px",color:"#08c"}})})},"update-user"),(0,r.jsx)(q.Z,{className:"".concat(e.className([t.Kg.COPY])),title:(0,g.wn)(),color:"cyan",placement:"left",children:(0,r.jsx)("a",{onClick:function(){n({type:"user/updateUserForm",payload:{itemEdit:i,type:t.Kg.COPY}})},children:(0,r.jsx)(he.Z,{style:{fontSize:"16px",color:"#08c"}})})},"copy-user"),(0,r.jsx)(q.Z,{className:"".concat(e.className([t.Kg.UPDATE_PASSWORD])),title:(0,g.iL)(),color:"cyan",placement:"left",children:(0,r.jsx)("a",{onClick:function(){n({type:"user/updateUserForm",payload:{itemEdit:i,type:t.Kg.UPDATE_PASSWORD}})},children:(0,r.jsx)(Ue.Z,{style:{fontSize:"16px",color:"red"}})})},"change-password-user")]}}];return(0,r.jsx)("div",{children:(0,r.jsx)(ye.ZP,{headerTitle:s.formatMessage({id:"pages.Admin.User.UserList.headerTitle",defaultMessage:"Danh s\xE1ch ng\u01B0\u1EDDi d\xF9ng"}),search:{layout:"vertical"},actionRef:m,rowKey:"id",sticky:!0,pagination:p()({},g.Uj),request:function(){var v=P()(d()().mark(function u(i,h,U){return d()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,ie(i,h,U);case 2:return F.abrupt("return",F.sent);case 3:case"end":return F.stop()}},u)}));return function(u,i,h){return v.apply(this,arguments)}}(),toolBarRender:function(){return[(0,r.jsx)(xe,{},"create-user")]},columns:l,scroll:g.V5})})},De=we,Se=a(11774),Oe=function(){return(0,r.jsxs)(Se._z,{children:[(0,r.jsx)(De,{}),(0,r.jsx)(ve,{})]})},Ze=Oe},1978:function(W,w){w.Z={avatar:"avatar___vPqHP"}}}]);
