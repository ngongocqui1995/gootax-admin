"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[650],{55287:function(k,D,r){var S=r(1413),C=r(67294),U=r(5717),m=r(91146),R=function(I,v){return C.createElement(m.Z,(0,S.Z)((0,S.Z)({},I),{},{ref:v,icon:U.Z}))};R.displayName="EyeOutlined",D.Z=C.forwardRef(R)},94149:function(k,D,r){r.d(D,{Z:function(){return I}});var S=r(1413),C=r(67294),U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},m=U,R=r(91146),y=function(W,$){return C.createElement(R.Z,(0,S.Z)((0,S.Z)({},W),{},{ref:$,icon:m}))};y.displayName="LockOutlined";var I=C.forwardRef(y)},43994:function(k,D,r){r.r(D),r.d(D,{default:function(){return Ze}});var S=r(11774),C=r(67294),U=r(15009),m=r.n(U),R=r(99289),y=r.n(R),I=r(97857),v=r.n(I),W=r(5574),$=r.n(W),se=r(5914),ne=r(42075),oe=r(4393),Z=r(83067),s=r(62492),_=r(952),O=r(32610),L=r(34955),f=r(57813),ue="name,phone",ee={gender:[{key:"gender",condition:"$in"}]};function le(i){return B.apply(this,arguments)}function B(){return B=y()(m()().mark(function i(a){var d,n,e,o=arguments;return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return d=o.length>1&&o[1]!==void 0?o[1]:{},n=o.length>2&&o[2]!==void 0?o[2]:{},l.next=4,(0,L.Z)({url:"customers",method:"GET",joins:(0,f.I6)(v()(v()({},n),a),ee),params:(0,f.ZC)(v()({},a),ee,ue),sorts:(0,f.q5)(v()(v()({},d),{},{updatedAt:"descend"}))});case 4:return e=l.sent,l.abrupt("return",{data:(e==null?void 0:e.data)||[],total:(e==null?void 0:e.total)||0,success:!0});case 6:case"end":return l.stop()}},i)})),B.apply(this,arguments)}function ie(i){return V.apply(this,arguments)}function V(){return V=y()(m()().mark(function i(a){return m()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,L.Z)({url:"customers",method:"POST",body:(0,f.A6)(a)});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},i)})),V.apply(this,arguments)}function de(i,a){return z.apply(this,arguments)}function z(){return z=y()(m()().mark(function i(a,d){return m()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.Z)({url:"customers/".concat(a),method:"PATCH",body:(0,f.A6)(d)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),z.apply(this,arguments)}function me(i,a){return H.apply(this,arguments)}function H(){return H=y()(m()().mark(function i(a,d){return m()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.Z)({url:"customers/update-email/change-password",method:"PUT",body:(0,f.A6)(v()(v()({},d),{},{user:a}))});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),H.apply(this,arguments)}function Ie(i){return Y.apply(this,arguments)}function Y(){return Y=_asyncToGenerator(_regeneratorRuntime().mark(function i(a){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,request({url:"customers/update/change-password",method:"PUT",body:removeParamsEmpty(a)});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},i)})),Y.apply(this,arguments)}function ce(i,a){return G.apply(this,arguments)}function G(){return G=y()(m()().mark(function i(a,d){return m()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.Z)({url:"customers/status/".concat(a),method:"PUT",body:{status:d}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),G.apply(this,arguments)}var t=r(85893),pe={labelCol:{span:6},wrapperCol:{span:14}},ve=function(){var a,d,n=(0,O.useDispatch)(),e=(0,O.useIntl)(),o=(0,O.useSelector)(function(h){return h==null?void 0:h.customer}),g=(0,C.useState)(!1),l=$()(g,2),p=l[0],T=l[1],x=(0,C.useRef)(null),M=(0,C.useRef)(),w=_.ZP.useForm(),K=$()(w,1),N=K[0];(0,C.useEffect)(function(){(function(){var h,u;if((h=o.CustomerForm)!==null&&h!==void 0&&h.type){var P,E;if(((P=o.CustomerForm)===null||P===void 0?void 0:P.type)===s.Kg.CREATE){var A;N.resetFields(),(A=M.current)===null||A===void 0||A.setImageUrl("")}if([s.Kg.UPDATE,s.Kg.COPY].includes((E=o.CustomerForm)===null||E===void 0?void 0:E.type)){var F,j;N.setFieldsValue(v()({},o.CustomerForm.itemEdit)),(F=M.current)===null||F===void 0||F.setImageUrl(((j=o.CustomerForm.itemEdit)===null||j===void 0?void 0:j.avatar)||"")}}T(!!((u=o.CustomerForm)!==null&&u!==void 0&&u.type))})()},[(a=o.CustomerForm)===null||a===void 0?void 0:a.type]);var Ke=function(){var u,P,E,A;if((u=o.CustomerForm)!==null&&u!==void 0&&u.type)return(0,t.jsxs)(t.Fragment,{children:[![s.Kg.UPDATE_PASSWORD].includes((P=o.CustomerForm)===null||P===void 0?void 0:P.type)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Z.ab,{ref:M,folder:"avatar"}),(0,t.jsx)(Z.HD,{}),(0,t.jsx)(Z.Tu,{}),((E=o.CustomerForm)===null||E===void 0?void 0:E.type)!==s.Kg.UPDATE&&(0,t.jsx)(Z.wu,{}),(0,t.jsx)(Z.HP,{fieldProps:{getPopupContainer:function(j){return x&&x.current||j.parentNode}}})]}),[s.Kg.UPDATE_PASSWORD].includes((A=o.CustomerForm)===null||A===void 0?void 0:A.type)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Z.wu,{name:"new_password",label:e.formatMessage({id:"pages.new_password",defaultMessage:"M\u1EADt kh\u1EA9u m\u1EDBi"}),placeholder:e.formatMessage({id:"pages.new_password.placeholder",defaultMessage:"Nh\u1EADp m\u1EADt kh\u1EA9u m\u1EDBi"}),labelCol:{span:8},wrapperCol:{span:12}}),(0,t.jsx)(Z.wu,{name:"confirm_password",label:e.formatMessage({id:"pages.confirm_password",defaultMessage:"M\u1EADt kh\u1EA9u x\xE1c nh\u1EADn"}),placeholder:e.formatMessage({id:"pages.confirm_password.placeholder",defaultMessage:"Nh\u1EADp m\u1EADt kh\u1EA9u x\xE1c nh\u1EADn"}),labelCol:{span:8},wrapperCol:{span:12}})]})]})},ae=function(){var u;n({type:"customer/updateCustomerForm",payload:{type:""}}),N.resetFields(),(u=M.current)===null||u===void 0||u.setImageUrl("")},Re=function(){var u;switch((u=o.CustomerForm)===null||u===void 0?void 0:u.type){case s.Kg.CREATE:case s.Kg.COPY:return e.formatMessage({id:"pages.Admin.Customer.CustomerForm.Create.title",defaultMessage:"Th\xEAm m\u1EDBi kh\xE1ch h\xE0ng"});case s.Kg.UPDATE:return e.formatMessage({id:"pages.Admin.Customer.CustomerForm.Update.title",defaultMessage:"C\u1EADp nh\u1EADt kh\xE1ch h\xE0ng"});case s.Kg.UPDATE_PASSWORD:return e.formatMessage({id:"pages.Admin.Customer.CustomerForm.UpdatePassword.title",defaultMessage:"\u0110\u1ED5i m\u1EADt kh\u1EA9u"});default:return""}},Ue=function(){var u;switch((u=o.CustomerForm)===null||u===void 0?void 0:u.type){case s.Kg.CREATE:case s.Kg.COPY:return e.formatMessage({id:"pages.Admin.Customer.CustomerForm.Create.submitText",defaultMessage:"T\u1EA1o m\u1EDBi"});case s.Kg.UPDATE:return e.formatMessage({id:"pages.Admin.Customer.CustomerForm.Update.submitText",defaultMessage:"C\u1EADp nh\u1EADt"});case s.Kg.UPDATE_PASSWORD:return e.formatMessage({id:"pages.Admin.Customer.CustomerForm.UpdatePassword.submitText",defaultMessage:"C\u1EADp nh\u1EADt"});default:return""}};return(0,t.jsx)(se.Z,{width:600,title:Re(),forceRender:!0,destroyOnClose:!0,visible:p,onCancel:ae,footer:!1,children:(0,t.jsx)("div",{ref:x,children:(0,t.jsx)(_.ZP,v()(v()({form:N},pe),{},{layout:"horizontal",onFinish:function(){var h=y()(m()().mark(function u(P){var E,A,F,j,Q,X,b,q;return m()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:F=v()(v()({},P),{},{avatar:(E=M.current)===null||E===void 0?void 0:E.getImageUrl()}),c.t0=(A=o.CustomerForm)===null||A===void 0?void 0:A.type,c.next=c.t0===s.Kg.COPY||c.t0===s.Kg.CREATE?4:c.t0===s.Kg.UPDATE?8:c.t0===s.Kg.UPDATE_PASSWORD?12:17;break;case 4:return c.next=6,ie(F);case 6:return j=c.sent,c.abrupt("break",17);case 8:return c.next=10,de(((Q=o.CustomerForm.itemEdit)===null||Q===void 0?void 0:Q.id)||"",F);case 10:return j=c.sent,c.abrupt("break",17);case 12:return delete F.avatar,c.next=15,me(((X=o.CustomerForm.itemEdit)===null||X===void 0?void 0:X.id)||"",F);case 15:return j=c.sent,c.abrupt("break",17);case 17:j&&(ae(),(b=o.CustomerList)===null||b===void 0||(q=b.reload)===null||q===void 0||q.call(b));case 18:case"end":return c.stop()}},u)}));return function(u){return h.apply(this,arguments)}}(),submitter:{render:function(u,P){return(0,t.jsx)(ne.Z,{className:"flex justify-end mt-4",children:P})},searchConfig:{submitText:Ue(),resetText:e.formatMessage({id:"pages.Admin.Customer.CustomerForm.resetText",defaultMessage:"L\xE0m m\u1EDBi"})},resetButtonProps:{className:[s.Kg.UPDATE,s.Kg.UPDATE_PASSWORD].includes((d=o.CustomerForm)===null||d===void 0?void 0:d.type)?"hidden":""}},onReset:function(){var u;(u=M.current)===null||u===void 0||u.setImageUrl("")},children:(0,t.jsx)(oe.Z,{children:Ke()})}))})})},fe=ve,ge=r(55287),he=r(65987),Ce=r(51767),ye=r(94149),Te=r(7842),re=r(9625),Pe=r(1978),te=r(97776),J=r(83062),Ee=r(72269),Ae=function(a){var d=a.status,n=a.record,e=(0,O.useSelector)(function(g){return g==null?void 0:g.customer}),o=function(){var g=y()(m()().mark(function l(p){var T,x,M;return m()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,ce(n.id,p?"ACTIVE":"INACTIVE");case 2:M=K.sent,M&&((T=e.CustomerList)===null||T===void 0||(x=T.reload)===null||x===void 0||x.call(T));case 4:case"end":return K.stop()}},l)}));return function(p){return g.apply(this,arguments)}}();return(0,t.jsx)(Ee.Z,{checked:d==="ACTIVE",onChange:o})},Me=Ae,Fe=r(51042),je=r(15867),xe=function(){var a=(0,O.useDispatch)(),d=(0,re.Z)(),n=function(){a({type:"customer/updateCustomerForm",payload:{type:s.Kg.CREATE}})};return(0,t.jsx)(je.ZP,{className:"".concat(d.className([s.Kg.CREATE])),type:"primary",onClick:n,icon:(0,t.jsx)(Fe.Z,{}),children:(0,t.jsx)(O.FormattedMessage,{id:"pages.create",defaultMessage:"T\u1EA1o m\u1EDBi"})})},we=xe,De=function(){var a=(0,O.useIntl)(),d=(0,C.useRef)(),n=(0,O.useDispatch)(),e=(0,re.Z)();(0,C.useEffect)(function(){n({type:"customer/updateCustomerList",payload:{reload:function(){var l;return(l=d.current)===null||l===void 0?void 0:l.reload()}}})},[]);var o=[{title:a.formatMessage({id:"pages.keyword",defaultMessage:"T\xECm theo"}),dataIndex:"keyword",hideInTable:!0,formItemProps:{tooltip:a.formatMessage({id:"pages.Admin.Customer.CustomerList.tooltip",defaultMessage:"B\u1EA1n c\xF3 th\u1EC3 t\xECm ki\u1EBFm theo t\xEAn, s\u1ED1 \u0111i\u1EC7n tho\u1EA1i."})},fieldProps:{placeholder:a.formatMessage({id:"pages.Admin.Customer.CustomerList.placeholder",defaultMessage:"Nh\u1EADp m\xE3, t\xEAn, s\u1ED1 \u0111i\u1EC7n tho\u1EA1i."})}},{title:a.formatMessage({id:"pages.avatar",defaultMessage:"\u1EA2nh"}),dataIndex:"avatar",width:120,search:!1,render:function(l,p){return(0,t.jsx)("a",{className:Pe.Z.avatar,children:(0,t.jsx)(te.Z,{placeholder:(0,t.jsx)(te.Z,{height:s.er.height,src:"error",fallback:f.gL}),preview:{mask:(0,t.jsx)(ge.Z,{})},height:s.er.height,width:s.er.width,src:(p==null?void 0:p.avatar)||"",fallback:f.gL})})}},{title:a.formatMessage({id:"pages.name",defaultMessage:"T\xEAn"}),dataIndex:"name",width:150,search:!1},{title:a.formatMessage({id:"pages.phone",defaultMessage:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"}),dataIndex:"phone",width:130,renderText:function(l){return(0,f.z1)(l)},search:!1},{title:a.formatMessage({id:"pages.gender",defaultMessage:"Gi\u1EDBi t\xEDnh"}),dataIndex:"gender",fieldProps:{placeholder:a.formatMessage({id:"pages.gender.placeholder",defaultMessage:"Ch\u1ECDn gi\u1EDBi t\xEDnh."})},width:120,valueType:"select",valueEnum:(0,f.q8)()},{title:a.formatMessage({id:"pages.createdAt",defaultMessage:"Ng\xE0y t\u1EA1o"}),dataIndex:"createdAt",valueType:"dateTime",width:150,search:!1,sorter:!0},{title:a.formatMessage({id:"pages.updatedAt",defaultMessage:"Ng\xE0y c\u1EADp nh\u1EADt"}),dataIndex:"updatedAt",valueType:"dateTime",width:150,search:!1,sorter:!0},{title:a.formatMessage({id:"pages.status",defaultMessage:"Tr\u1EA1ng th\xE1i"}),dataIndex:"status",width:100,renderText:function(l,p){return(0,t.jsx)(Me,{status:l,record:p})},fieldProps:{placeholder:a.formatMessage({id:"pages.status.placeholder",defaultMessage:"Ch\u1ECDn tr\u1EA1ng th\xE1i."})},valueType:"select",valueEnum:(0,f.Z0)(),hideInTable:!e.accessible([s.Kg.UPDATE_STATUS])},{title:a.formatMessage({id:"pages.options",defaultMessage:"Tu\u1EF3 ch\u1EC9nh"}),dataIndex:"option",valueType:"option",align:"center",fixed:"right",width:90,hideInTable:!e.accessible([s.Kg.UPDATE,s.Kg.COPY]),render:function(l,p){return[(0,t.jsx)(J.Z,{className:"".concat(e.className([s.Kg.UPDATE])),title:(0,f.sb)(),color:"cyan",placement:"left",children:(0,t.jsx)("a",{onClick:function(){n({type:"customer/updateCustomerForm",payload:{itemEdit:p,type:s.Kg.UPDATE}})},children:(0,t.jsx)(he.Z,{style:{fontSize:"16px",color:"#08c"}})})},"update-customer"),(0,t.jsx)(J.Z,{className:"".concat(e.className([s.Kg.COPY])),title:(0,f.wn)(),color:"cyan",placement:"left",children:(0,t.jsx)("a",{onClick:function(){n({type:"customer/updateCustomerForm",payload:{itemEdit:p,type:s.Kg.COPY}})},children:(0,t.jsx)(Ce.Z,{style:{fontSize:"16px",color:"#08c"}})})},"copy-customer"),(0,t.jsx)(J.Z,{className:"".concat(e.className([s.Kg.UPDATE_PASSWORD])),title:(0,f.iL)(),color:"cyan",placement:"left",children:(0,t.jsx)("a",{onClick:function(){n({type:"customer/updateCustomerForm",payload:{itemEdit:p,type:s.Kg.UPDATE_PASSWORD}})},children:(0,t.jsx)(ye.Z,{style:{fontSize:"16px",color:"red"}})})},"change-password-customer")]}}];return(0,t.jsx)("div",{children:(0,t.jsx)(Te.ZP,{headerTitle:a.formatMessage({id:"pages.Admin.Customer.CustomerList.headerTitle",defaultMessage:"Danh s\xE1ch kh\xE1ch h\xE0ng"}),search:{layout:"vertical"},actionRef:d,rowKey:"id",sticky:!0,pagination:v()({},f.Uj),request:function(){var g=y()(m()().mark(function l(p,T,x){return m()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,le(p,T,x);case 2:return w.abrupt("return",w.sent);case 3:case"end":return w.stop()}},l)}));return function(l,p,T){return g.apply(this,arguments)}}(),toolBarRender:function(){return[(0,t.jsx)(we,{},"create-customer")]},columns:o,scroll:f.V5})})},Oe=De,Se=function(){return(0,t.jsxs)(S._z,{children:[(0,t.jsx)(Oe,{}),(0,t.jsx)(fe,{})]})},Ze=Se},1978:function(k,D){D.Z={avatar:"avatar___vPqHP"}}}]);
